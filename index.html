<!DOCTYPE html>
<html lang="en" data-bs-theme="light">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SysM - Dashboard</title>
  <link rel="shortcut icon" href="./assets/icons/favicon/favicon.ico" type="image/x-icon">
  <link rel="stylesheet" href="./assets/vendor/datatables/datatable.bundle.min.css">
  <link rel="stylesheet" href="./assets/vendor/bs5/css/bootstrap.min.css">
  <link rel="stylesheet" href="./assets/vendor/bs5/icons/font/bootstrap-icons.min.css">
  <link rel="stylesheet" href="./assets/app/css/style.css">
</head>

<body>
  <div class="container-fluid">
    <div class="row">
      <!-- LEFT SIDEBAR START -->
      <aside class="col-2 p-0" id="sidebar-menu--left">
        <header class="p-0">
          <nav class="navbar navbar-expand-lg bg-body-tertiary" aria-label="sidebar">
            <div class="container-fluid">
              <a class="navbar-brand" href="#">
                <img src="./assets/logos/logo.webp" alt="Logo" class="d-inline-block align-text-top">
                SysM
              </a>
            </div>
          </nav>
        </header>
        <div class="sidebar-menu--left-items">
          <ul class="mt-2">
            <li class="menu-item label">Home</li>
            <li class="menu-item active">
              <a href="/"><i class="icon bi bi-speedometer2"></i> Dashboard</a>
            </li>
          </ul>
        </div>
        <div class="version"><span class="data" id="version-value"></div>
      </aside>
      <!-- LEFT SIDEBAR END -->
      <div class="col-10">
        <div class="row">
          <!-- HEADER START -->
          <header class="p-0">
            <nav class="navbar navbar-expand-lg bg-body-tertiary" aria-label="topbar">
              <div class="container-fluid">
                <a class="navbar-brand" href="javascript:void(0);">
                  <i class="bi bi-list"></i>
                </a>
                <div class="col-6">
                  <div class="input-group">
                    <input type="text" id="sysm-base-url" class="form-control"
                      placeholder="SysM Base URL (Default: http://localhost:8080)" aria-label="SysM Base URL"
                      aria-describedby="monitor-button">
                    <button class="btn btn-outline-secondary" type="button" id="monitor-button"><i
                        class="bi bi-display"></i></button>
                  </div>
                </div>
                <div class="d-flex">
                  <div class="toggle-theme">
                    <div class="container">
                      <label class="switch">
                        <input type="checkbox" id="themeToggleSwitch" checked>
                        <div class="slider">
                          <div class="sun"></div>
                          <div class="moon"></div>
                          <div class="cloud cloud1"></div>
                          <div class="cloud cloud2"></div>
                          <div class="star star1"></div>
                          <div class="star star2"></div>
                          <div class="star star3"></div>
                          <div class="star star4"></div>
                          <div class="star star5"></div>
                        </div>
                      </label>
                    </div>
                  </div>
                  <div>
                    <a id="setSystemTheme" href="javascript:void(0);" type="button"
                      data-tooltip="Switch to system theme" data-tooltip-location="left"><i class="bi bi-laptop"
                        style="font-size: 1.3rem;"></i></a>
                  </div>
                </div>
              </div>
            </nav>
          </header>
          <!-- HEADER END -->
          <!-- CONTENT START -->
          <main class="content overflow-y-hidden">
            <div id="content-backdrop" class="backdrop text-center">
              <p class="mt-4">
                <small>Enter SysM instance url and hit monitor button ( <i class="bi bi-display"
                    style="font-size: 1rem;"></i> ) at top input field.</small>
              </p>
            </div>
            <div class="container-fluid my-2">
              <div>
                <div class="card">
                  <div class="card-body">
                    <h2 class="h2 card-title">System Info</h2>
                    <div class="row">
                      <div class="col-lg-3 col-md-4">
                        <div class="card">
                          <div class="card-body">
                            <div class="card-title">Operating System</div>
                            <div class="data fw-bold" id="os-name"></div>
                          </div>
                        </div>
                      </div>
                      <div class="col-lg-3 col-md-4">
                        <div class="card">
                          <div class="card-body">
                            <div class="card-title">OS Version</div>
                            <div class="data fw-bold" id="os-version"></div>
                          </div>
                        </div>
                      </div>
                      <div class="col-lg-3 col-md-4">
                        <div class="card">
                          <div class="card-body">
                            <div class="card-title">OS Architecture</div>
                            <div class="data fw-bold" id="os-architecture"></div>
                          </div>
                        </div>
                      </div>
                      <div class="col-lg-3 col-md-4">
                        <div class="card">
                          <div class="card-body">
                            <div class="card-title">Processors Available</div>
                            <div class="data fw-bold" id="processors-available"></div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="mt-2">
                <div class="card">
                  <div class="card-body">
                    <h2 class="h2">CPU</h2>
                    <hr>
                    <div class="row">
                      <div class="col-sm-3 col-md-5 border-right">
                        <div class="card-title h4 text-center">Instant Monitor</div>
                        <hr>
                        <div class="graph-cpu" id="instant-cpu-usage"></div>
                      </div>
                      <div class="col-sm-9 col-md-7">
                        <div class="card-title h4 text-center">CPU Usage History</div>
                        <hr>
                        <div class="graph-cpu" id="cpu-usage-history"></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="mt-2">
                <div class="card">
                  <div class="card-body">
                    <h2 class="h2">Memory</h2>
                    <hr>
                    <div class="row">
                      <div class="col-sm-6 border-right">
                        <div class="card-title h4 text-center">Physical Memory</div>
                        <hr>
                        <div class="row">
                          <div class="col-4 border-right"><span class="data-label h6 fw-light">Total</span> <span
                              class="data d-block fw-bold" id="physical-memory-total"></span></div>
                          <div class="col-4 border-right"><span class="data-label h6 fw-light">Used</span> <span
                              class="data d-block fw-bold" id="physical-memory-used"></span></div>
                          <div class="col-4"><span class="data-label h6 fw-light">Free</span> <span
                              class="data d-block fw-bold" id="physical-memory-free"></span></div>
                        </div>
                        <hr>
                        <div class="graph-memory" id="physical-memory-usage"></div>
                      </div>
                      <div class="col-sm-6">
                        <div class="card-title h4 text-center">Swap Space</div>
                        <hr>
                        <div class="row">
                          <div class="col-4 border-right"><span class="data-label h6 fw-light">Total</span> <span
                              class="data d-block fw-bold" id="swap-space-total"></span></div>
                          <div class="col-4 border-right"><span class="data-label h6 fw-light">Used</span> <span
                              class="data d-block fw-bold" id="swap-space-used"></span></div>
                          <div class="col-4"><span class="data-label h6 fw-light">Free</span> <span
                              class="data d-block fw-bold" id="swap-space-free"></span></div>
                        </div>
                        <hr>
                        <div class="graph-memory" id="swap-space-usage"></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="mt-2">
                <div class="card">
                  <div class="card-body">
                    <h2 class="h2">Disk Usage</h2>
                    <hr>
                    <div class="row" id="disk-usage">

                    </div>
                  </div>
                </div>
              </div>
              <div class="mt-2">
                <div class="card">
                  <div class="card-body">
                    <h2 class="h2">Running Processes</h2>
                    <hr>
                    <div class="row" id="running-processes">
                      <div class="table-responsive">
                        <table class="table table-bordered table-hover table-sm table-striped" id="process-table"></table>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </main>
          <!-- CONTENT END -->
        </div>
      </div>
    </div>
  </div>
  <script>
    const defaultBaseUrl = "http://localhost:8080";
    const contentElement = document.querySelector("main.content");
    const monitorButton = document.querySelector("#monitor-button");
    const baseUrlField = document.querySelector("#sysm-base-url");
    const contentBackdrop = document.querySelector("#content-backdrop");
  </script>
  <script src="./assets/vendor/jq/jquery-3.7.1.min.js"></script>
  <script src="./assets/vendor/pdfmake/pdfmake.min.js"></script>
  <script src="./assets/vendor/pdfmake/vfs_fonts.js"></script>
  <script src="./assets/vendor/datatables/datatable.bundle.min.js"></script>
  <script src="./assets/vendor/bs5/js/bootstrap.min.js"></script>
  <script src="./assets/vendor/echarts/echarts.min.js"></script>
  <script src="./assets/app/js/app.js"></script>
  <script src="./assets/app/js/rest.js"></script>
  <script src="./assets/app/js/sse.js"></script>
  <script>
    if (monitorButton) {
      monitorButton.addEventListener("click", (event) => {
        const baseUrl = baseUrlField.value || defaultBaseUrl;
        populateDashboardRest(baseUrl);
        populateDashboardSse(baseUrl);
        showProcesses(baseUrl);
        contentBackdrop.classList.add("d-none");
        contentElement.classList.remove("overflow-y-hidden");
      })
    }
  </script>
</body>

</html>
